<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="HTTPS," />










<meta name="description" content="什么是HTTPS本质上是：基于SSL/TSL构建的通道，再叠加HTTP的通信，在这个通道协议保护下，S/C之间的通信可以在不可信的网络中保密的传输， SSL/TLS 保护整个上层应用协议的通信包， 域名不加密 超文本传输协议安全（HTTPS）是HTTP的安全版本，HTTP是在浏览器和您连接的网站之间发送数据的协议。HTTPS末尾的“S”代表“安全”。这意味着您的浏览器和网站之间的所有通信都是加密的">
<meta name="keywords" content="HTTPS">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTPS">
<meta property="og:url" content="http://yoursite.com/2018/08/03/HTTPS/index.html">
<meta property="og:site_name" content="Gaomy&#39;s blog">
<meta property="og:description" content="什么是HTTPS本质上是：基于SSL/TSL构建的通道，再叠加HTTP的通信，在这个通道协议保护下，S/C之间的通信可以在不可信的网络中保密的传输， SSL/TLS 保护整个上层应用协议的通信包， 域名不加密 超文本传输协议安全（HTTPS）是HTTP的安全版本，HTTP是在浏览器和您连接的网站之间发送数据的协议。HTTPS末尾的“S”代表“安全”。这意味着您的浏览器和网站之间的所有通信都是加密的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://blog.cystack.net/content/images/2017/10/1_H4mkE3627sQSXkuUeVoUaQ-1-.png">
<meta property="og:image" content="https://blog.wilddog.com/wp-content/uploads/2015/09/0-33.jpeg">
<meta property="og:updated_time" content="2018-08-27T11:46:13.107Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTTPS">
<meta name="twitter:description" content="什么是HTTPS本质上是：基于SSL/TSL构建的通道，再叠加HTTP的通信，在这个通道协议保护下，S/C之间的通信可以在不可信的网络中保密的传输， SSL/TLS 保护整个上层应用协议的通信包， 域名不加密 超文本传输协议安全（HTTPS）是HTTP的安全版本，HTTP是在浏览器和您连接的网站之间发送数据的协议。HTTPS末尾的“S”代表“安全”。这意味着您的浏览器和网站之间的所有通信都是加密的">
<meta name="twitter:image" content="https://blog.cystack.net/content/images/2017/10/1_H4mkE3627sQSXkuUeVoUaQ-1-.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/03/HTTPS/"/>





  <title>HTTPS | Gaomy's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Gaomy's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">前端</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/03/HTTPS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gaomy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/assets/img/pic.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gaomy's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">HTTPS</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-03T18:40:59+08:00">
                2018-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h4 id="什么是HTTPS"><a href="#什么是HTTPS" class="headerlink" title="什么是HTTPS"></a>什么是HTTPS</h4><p>本质上是：基于SSL/TSL构建的通道，再叠加HTTP的通信，在这个通道协议保护下，S/C之间的通信可以在不可信的网络中保密的传输，</p>
<p>SSL/TLS 保护整个上层应用协议的通信包，</p>
<p>域名不加密</p>
<p>超文本传输协议安全（HTTPS）是HTTP的安全版本，HTTP是在浏览器和您连接的网站之间发送数据的协议。HTTPS末尾的“S”代表“安全”。这意味着您的浏览器和网站之间的所有通信都是加密的。</p>
<p>HTTPS通常用于保护高度机密的在线交易，如网上银行和在线购物订单。</p>
<p>受保护的信息包括<strong>Cookie，用户代理详细信息，URL路径，表单提交和查询字符串参数</strong>。HTTPS旨在防止在传输过程中读取或更改此信息</p>
<p>Internet Explorer，Firefox和Chrome等Web浏览器也会在地址栏中显示挂锁图标，以直观地指示HTTPS连接有效。</p>
<h4 id="HTTPS如何工作"><a href="#HTTPS如何工作" class="headerlink" title="HTTPS如何工作"></a>HTTPS如何工作</h4><p>HTTPS页面通常使用两种安全协议之一来加密通信 - <a href="https://www.instantssl.com/ssl.html" target="_blank" rel="noopener">SSL（安全套接字层）</a>或TLS（传输层安全性）。TLS和SSL协议都使用所谓的“非对称”公钥基础结构（PKI）系统。非对称系统使用两个“密钥”来加密通信，一个“公共”密钥和一个“私有”密钥。使用公钥加密的任何内容只能通过私钥解密，反之亦然。</p>
<p>“私人”密钥应该受到严格保护，并且只能由私钥的所有者访问。对于网站，私钥仍然安全地存放在Web服务器上。相反，公钥旨在分发给任何需要能够解密用私钥加密的信息的人和每个人。</p>
<h4 id="什么是-SSL证书"><a href="#什么是-SSL证书" class="headerlink" title="什么是 SSL证书"></a>什么是 SSL证书</h4><p>两个作用：</p>
<ul>
<li>验证服务器的身份</li>
<li>对传输的数据进行加密、保证其完整性及隐私性</li>
</ul>
<p>当您请求与网页建立HTTPS连接时，网站最初会将其SSL证书发送到您的浏览器。此证书包含开始安全会话所需的公钥。根据此初始交换，您的浏览器和网站然后启动“SSL握手”。SSL握手涉及生成共享机密以在您自己和网站之间建立唯一安全的连接。</p>
<p>证书颁发机构<a href="https://https.cio.gov/#footnote-2" target="_blank" rel="noopener">[2]</a>可以代表Web服务所有者颁发加密签名证书。这些证书向客户端传达Web服务主机在证书颁发时向证书颁发机构证明域的所有权。这可以防止未知或不受信任的网站伪装成联邦网站或服务。</p>
<h4 id="为什么需要证书"><a href="#为什么需要证书" class="headerlink" title="为什么需要证书"></a>为什么需要证书</h4><p>通过常规HTTP连接发送的所有通信都是<strong>“纯文本”</strong>，任何黑客都可以读取，这些黑客会破坏浏览器和网站之间的连接。如果“通信”在订单上并且包含您的信用卡详细信息或社会安全号码，则存在明显的危险。通过HTTPS连接，所有通信都是安全加密的。这意味着即使有人设法闯入连接，他们也无法解密您和网站之间传递的任何数据。</p>
<h4 id="HTTPS-证书的好处"><a href="#HTTPS-证书的好处" class="headerlink" title="HTTPS 证书的好处"></a>HTTPS 证书的好处</h4><p>通过常规HTTP连接发送的所有通信都是“纯文本”，任何黑客都可以读取，这些黑客会破坏浏览器和网站之间的连接。如果“通信”在订单上并且包含您的信用卡详细信息或社会安全号码，则存在明显的危险。通过HTTPS连接，所有通信都是安全加密的。这意味着即使有人设法闯入连接，他们也无法解密您和网站之间传递的任何数据。</p>
<h4 id="HTTPS-不做什么"><a href="#HTTPS-不做什么" class="headerlink" title="HTTPS 不做什么"></a>HTTPS 不做什么</h4><p>HTTPS有几个重要的限制。通信期间<strong>未加密IP地址和目标域名</strong>。即使是加密的流量也可以间接地泄露某些信息，例如在网站上花费的时间，或者请求的资源或提交的信息的大小。</p>
<p>HTTPS仅保证两个系统之间连接的完整性，而不是系统本身。它的目的不是保护Web服务器不被黑客入侵或泄露，或者防止Web服务在正常操作期间暴露用户信息。同样，如果攻击者破坏了用户的系统，则可以更改该系统，以使其未来的HTTPS连接受到攻击者的控制。HTTPS的保证也可能被受损或恶意的证书颁发机构削弱或消除</p>
<h4 id="建立连接的过程"><a href="#建立连接的过程" class="headerlink" title="建立连接的过程"></a>建立连接的过程</h4><p>连接建立在TCP 握手之后、发送/接受HTTP请求之前，HTTPS通过SSL/TLS握手的SSL/TLS协议在客户端和服务器之间建立协商，</p>
<p>目标：</p>
<ul>
<li>确保客户端与正确的服务器通信</li>
<li>商定一个双方都支持的密码套件（加密算法等）</li>
<li>获得对于各方能够具有对于算法来说必要的商定的密钥</li>
</ul>
<p>ssL的handshake</p>
<p><img src="https://blog.cystack.net/content/images/2017/10/1_H4mkE3627sQSXkuUeVoUaQ-1-.png" alt="SSLæ¡æ"></p>
<h4 id="加密什么"><a href="#加密什么" class="headerlink" title="加密什么"></a>加密什么</h4><p>加密几乎一切传递的数据（除了IP和域名）</p>
<h4 id="加密了就保证了安全吗"><a href="#加密了就保证了安全吗" class="headerlink" title="加密了就保证了安全吗"></a>加密了就保证了安全吗</h4><h4 id="影响性能速度如何处理"><a href="#影响性能速度如何处理" class="headerlink" title="影响性能速度如何处理"></a>影响性能速度如何处理</h4><h4 id="HTTPS通信过程"><a href="#HTTPS通信过程" class="headerlink" title="HTTPS通信过程"></a>HTTPS通信过程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; 客户端向服务端发送请求 </span><br><span class="line">   -&gt; 服务端返回数字证书 </span><br><span class="line">	-&gt; 客户端用自己的CA[主流的CA机构证书一般都内置在各个主流浏览器中]公钥去解密证书,如果证书有问题会提示风险 </span><br><span class="line">	    -&gt; 如果证书没问题客户端会生成一个对称加密的随机秘钥然后再和刚刚解密的服务器端的公钥对数据进行加密,然后发送给服务器端 </span><br><span class="line">		  -&gt; 服务器端收到以后会用自己的私钥对客户端发来的对称秘钥进行解密 </span><br><span class="line">			-&gt; 之后双方就拿着这个对称加密秘钥来进行正常的通信</span><br></pre></td></tr></table></figure>
<h4 id="加解密算法"><a href="#加解密算法" class="headerlink" title="加解密算法"></a>加解密算法</h4><h6 id="1-对称加密"><a href="#1-对称加密" class="headerlink" title="1.对称加密"></a>1.对称加密</h6><p>分为：</p>
<p>流式、分组两种 加密解密使用同一个密钥</p>
<p>主要有： <strong>DES、AES-GCM、ChaCha20-Ploy1305、AES，RC4，3DES</strong>  等</p>
<p>简单了解原理：</p>
<p>DES:</p>
<p>AES-GCM:</p>
<p>ChaCha20-Ploy1305:</p>
<h6 id="2-非对称加密"><a href="#2-非对称加密" class="headerlink" title="2.非对称加密"></a>2.非对称加密</h6><p>加密密钥与解密密钥不同，称为：公钥、私钥 </p>
<p>使用公钥加密的只能用私钥解密，相反同理</p>
<p>公钥和算法都是公开的，私钥是保密的。</p>
<p>非对称加密算法性能较低，（密钥交换等过程耗费）但是安全性超强，由于其加密特性，非对称加密算法能加密的数据长度也是有限的。</p>
<p>非对称加密算法性能低的原因：</p>
<p>非对称加密算法：</p>
<p>RSA（见的比较多）、DSA、ECDSA、DH、ECDHE</p>
<h6 id="3-哈希算法"><a href="#3-哈希算法" class="headerlink" title="3.哈希算法"></a>3.哈希算法</h6><p>任意长度的信息转换为较短的固定长度的值，通常其长度要比信息小得多，且算法不可逆</p>
<p>例如： MD5、SHA-1、SHA-2、SHA-256</p>
<h6 id="4-数字签名"><a href="#4-数字签名" class="headerlink" title="4.数字签名"></a>4.数字签名</h6><p>签名就是在信息的后面再加上一段内容（信息经过hash后的值），可以证明信息没有被修改过。hash值一般都会加密后（也就是签名）再和信息一起发送，以保证这个hash值不被修改</p>
<p><a href="https://www.ssllabs.com/ssltest/" target="_blank" rel="noopener">在线版HTTPS网站检测工具</a></p>
<p>会对HTTPS网站的证书链、安全性、性能、协议细节进行全面检测，检测完毕后会进行打分，同时给出一份详细的检测报告和改进建议。</p>
<h4 id="提高HTTPS网站的性能和访问速度"><a href="#提高HTTPS网站的性能和访问速度" class="headerlink" title="提高HTTPS网站的性能和访问速度"></a>提高HTTPS网站的性能和访问速度</h4><p>误区： 并不是你加了TLS 证书，你的网站就是HTTPS网站了</p>
<p>加上证书，通常网站的速度会变慢，原因：</p>
<p>1.HTTPS 比HTTP <strong>通信时产生更多的通信过程，</strong>RTT 时间增加</p>
<p>2.通信过程中的<strong>非对称和对称加密计算</strong>也会造成更多的服务器性能和时间上的消耗</p>
<h5 id="优化点"><a href="#优化点" class="headerlink" title="优化点"></a>优化点</h5><h6 id="1-HSTS（HTTP-Strict-Transport-Security）"><a href="#1-HSTS（HTTP-Strict-Transport-Security）" class="headerlink" title="1.HSTS（HTTP Strict Transport Security）"></a>1.HSTS（HTTP Strict Transport Security）</h6><p>HTTPS网站通常的做法是对HTTP的访问在服务器端做302跳转，跳转到HTTPS.,但是存在一些问题</p>
<ol>
<li>使用不安全的HTTP协议进行通信；</li>
</ol>
<ol>
<li>增加一个Round-Trip Time</li>
</ol>
<p>HSTS是HTTP Strict Transport Security的缩写，服务器端配置支持HSTS后，会在给浏览器返回的HTTP Header中携带HSTS字段，浏览器在获取到该信息后，在接下来的一段时间内，对该网站的所有HTTP访问，浏览器都将请求在内部做307跳转到HTTPS，而无需任何网络过程</p>
<h6 id="2-Session-Resume（会话复用）"><a href="#2-Session-Resume（会话复用）" class="headerlink" title="2.Session Resume（会话复用）"></a>2.Session Resume（会话复用）</h6><p>是提升HTTPS网站性能最基础也是最有效的方法。</p>
<p>在HTTPS握手阶段，对服务器性能消耗最为严重的是非对称密钥交换计算，而Session Resume通过对已经建立TLS会话的合理复用，节省非对称密钥交换计算次数，可大幅提高服务器的TLS性能</p>
<p><img src="https://blog.wilddog.com/wp-content/uploads/2015/09/0-33.jpeg" alt="0 (33)"></p>
<p>TLS协议提供两种实现机制Session Resume，分别是Session cache和Session ticket。</p>
<p><strong>Session Cache</strong></p>
<p>Session Cache的原理是使用Session ID查询服务器上的session cache，如果命中，则直接使用缓存信息。但Session Cache有个明显的缺点，它不支持分布式缓存，只支持单机进程间的共享缓存。这对于多个接入节点的架构很难适用。</p>
<p><strong>Session ticket</strong></p>
<p>Session ticket的原理是服务器将session信息加密成ticket发送给浏览器，浏览器后续进行TLS握手时，会发送ticket，如果服务器能够解密和处理该ticket，则可以复用session。</p>
<p>Session ticket可以很好的解决分布式问题，但Session ticket的支持率还不是很高，而且需要考虑服务器上key的安全性方案</p>
<h6 id="3-OCSP-Stapling"><a href="#3-OCSP-Stapling" class="headerlink" title="3.OCSP Stapling"></a>3.OCSP Stapling</h6><p>在HTTPS通信过程时，浏览器会去验证服务器端下发的证书链是否已经被撤销。验证的方法有两种：CRL和OCSP。</p>
<p>CRL是证书撤销列表，CA机构会维护并定期更新CRL列表，但这个机制存在不足：</p>
<p>1.CRL列表只会越来越大；</p>
<p>2.如果浏览器更新不及时，会造成误判。</p>
<p>OCSP是实时证书在线验证协议，是对CRL机制的弥补，通过OCSP浏览器可以实时的向CA机构验证证书。但OCSP同样存在不足</p>
<ol>
<li>对CA机构要求过高，要求实时全球高可用；</li>
<li>客户端的访问隐私会在CA机构被泄露；</li>
<li>增加浏览器的握手时延。</li>
</ol>
<p>OCSP Stapling是对OCSP缺陷的弥补，服务器可事先模拟浏览器对证书链进行验证，并将带有CA机构签名的OCSP响应保存到本地，然后在握手阶段，将OCSP响应和证书链一起下发给浏览器，省去浏览器的在线验证过程。</p>
<h6 id="4-SPDY和HTTP-2"><a href="#4-SPDY和HTTP-2" class="headerlink" title="4.SPDY和HTTP/2"></a>4.SPDY和HTTP/2</h6><p>SPDY 是 Google 推出的优化 HTTP 传输效率的协议，采用多路复用方式，能将多个 HTTP 请求在同一个连接上一起发出去，对HTTP通信效率提升明显。HTTP2.0是 IETF 2015 年 2 月份通过的 HTTP 下一代协议，它以 SPDY 为原型。SPDY 和 HTTP2 目前的实现默认使用 HTTPS 协议。</p>
<p>Nginx stable版本当前只能支持到SPDY3.1，但最新发布的1.9.5版本通过打patch的方式，可以支持HTTP2.0，这绝对是不一样的奇妙体验。不过不建议直接在线上环境部署，等到2015年年底吧，Nginx会发布Stable版本支持HTTP2.0.</p>
<h6 id="5-TCP-优化"><a href="#5-TCP-优化" class="headerlink" title="5.TCP 优化"></a>5.TCP 优化</h6><p>慢启动是TCP规范中很重要的算法，其目的是为避免网络拥塞。通过客户端和服务器之间的数据交换，从一个很保守的初始拥塞窗口值，收敛到双方都认可的可用带宽。当客户端和服务器收敛到一定带宽时，如果一段时间内，双方没有收发数据包，服务器端的拥塞窗口会被重置为初始拥塞窗口值。这对于连接中的突发数据传输性能影响是很严重的。</p>
<p><strong>在没有充足的理由时，服务器端需要禁用空闲后的慢启动机制。</strong></p>
<p>另外，当前浏览器和服务器之间的可用带宽已经相对较大，所以我们还应该将初始的拥塞窗口值扩大，新的RFC中的建议是10，Google是16。</p>
<h6 id="6-TLS-Record-Size"><a href="#6-TLS-Record-Size" class="headerlink" title="6.TLS Record Size"></a>6.TLS Record Size</h6><p>服务器在建立TLS连接时，会为每个连接分配Buffer，这个Buffer叫TLS Record Size。这个Size是可调。</p>
<p>Size值如果过小，头部负载比重就会过大，最高可达6%。</p>
<p>Size值如果过大，那单个Record在TCP层会被分成多个包发送。浏览器必须等待这些全部达到后，才能解密，一旦出现丢包、拥塞、重传、甚至重新建立的情况，时延就会被相应增加。</p>
<p>那TLS Record Size值如何选择呢？有两个参数可参考。</p>
<p>首先，TLS Record Size要大于证书链和OCSP Stapling响应大小，证书链不会分成多个record；</p>
<p>其次，要小于初始拥塞窗口值，保证服务器在通信之初可以发送足够数据而不需要等待浏览器确认</p>
<p>一般来说，从根CA机构申请的证书为2-3KB左右，级数越多，证书链越大，ocsp响应为2KB左右，所以TLS Record Size是需要根据你的实际情况设置，Google的值5KB。WildDog当前的值是6KB</p>
<h6 id="7-证书链完整且不冗余"><a href="#7-证书链完整且不冗余" class="headerlink" title="7.证书链完整且不冗余"></a>7.证书链完整且不冗余</h6><p>浏览器在验证服务器下发的证书链时，不仅仅验证网站证书。如果是多级证书，网站证书和根证书之间所有的中间证书都需要被验证。一旦出现证书链出现不完整，浏览器就会暂停握手过程，自行到因特网进行验证，这个时间基本是不可估算的。</p>
<p>至于怎么查看，通过openssl命令查看，也可以通过SSL Labs帮你在线检测。</p>
<h6 id="8-移动设备上的ChaCha20-Poly1305"><a href="#8-移动设备上的ChaCha20-Poly1305" class="headerlink" title="8.移动设备上的ChaCha20-Poly1305"></a>8.移动设备上的ChaCha20-Poly1305</h6><p>ChaCha20被用来加密，Poly1305被用来消息认证，两个操作都需要运行于TLS上。</p>
<p>当前流行的加密套件AES-GCM在TLS 1.2支持，它是不安全RC4和AES-CBC加密套件的替代品。但是，在不支持硬件AES的设备上会引起性能问题，如大部分的智能手机、平板电脑、可穿戴设备。</p>
<p>SSL Handshake过程中服务器端RSA2048解密操作可以用专用硬件做加速来大大提升握手效率。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/HTTPS/" rel="tag"># HTTPS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/01/TypeScript实践-错误处理/" rel="next" title="TypeScript实践-错误处理">
                <i class="fa fa-chevron-left"></i> TypeScript实践-错误处理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/08/ES6/" rel="prev" title="ES6">
                ES6 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/assets/img/pic.jpg"
                alt="Gaomy" />
            
              <p class="site-author-name" itemprop="name">Gaomy</p>
              <p class="site-description motion-element" itemprop="description">gao's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是HTTPS"><span class="nav-number">1.</span> <span class="nav-text">什么是HTTPS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTPS如何工作"><span class="nav-number">2.</span> <span class="nav-text">HTTPS如何工作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是-SSL证书"><span class="nav-number">3.</span> <span class="nav-text">什么是 SSL证书</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么需要证书"><span class="nav-number">4.</span> <span class="nav-text">为什么需要证书</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTPS-证书的好处"><span class="nav-number">5.</span> <span class="nav-text">HTTPS 证书的好处</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTPS-不做什么"><span class="nav-number">6.</span> <span class="nav-text">HTTPS 不做什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建立连接的过程"><span class="nav-number">7.</span> <span class="nav-text">建立连接的过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加密什么"><span class="nav-number">8.</span> <span class="nav-text">加密什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加密了就保证了安全吗"><span class="nav-number">9.</span> <span class="nav-text">加密了就保证了安全吗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#影响性能速度如何处理"><span class="nav-number">10.</span> <span class="nav-text">影响性能速度如何处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTPS通信过程"><span class="nav-number">11.</span> <span class="nav-text">HTTPS通信过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加解密算法"><span class="nav-number">12.</span> <span class="nav-text">加解密算法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-对称加密"><span class="nav-number">12.0.1.</span> <span class="nav-text">1.对称加密</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-非对称加密"><span class="nav-number">12.0.2.</span> <span class="nav-text">2.非对称加密</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-哈希算法"><span class="nav-number">12.0.3.</span> <span class="nav-text">3.哈希算法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-数字签名"><span class="nav-number">12.0.4.</span> <span class="nav-text">4.数字签名</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#提高HTTPS网站的性能和访问速度"><span class="nav-number">13.</span> <span class="nav-text">提高HTTPS网站的性能和访问速度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#优化点"><span class="nav-number">13.1.</span> <span class="nav-text">优化点</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-HSTS（HTTP-Strict-Transport-Security）"><span class="nav-number">13.1.1.</span> <span class="nav-text">1.HSTS（HTTP Strict Transport Security）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-Session-Resume（会话复用）"><span class="nav-number">13.1.2.</span> <span class="nav-text">2.Session Resume（会话复用）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-OCSP-Stapling"><span class="nav-number">13.1.3.</span> <span class="nav-text">3.OCSP Stapling</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-SPDY和HTTP-2"><span class="nav-number">13.1.4.</span> <span class="nav-text">4.SPDY和HTTP/2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-TCP-优化"><span class="nav-number">13.1.5.</span> <span class="nav-text">5.TCP 优化</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-TLS-Record-Size"><span class="nav-number">13.1.6.</span> <span class="nav-text">6.TLS Record Size</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-证书链完整且不冗余"><span class="nav-number">13.1.7.</span> <span class="nav-text">7.证书链完整且不冗余</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#8-移动设备上的ChaCha20-Poly1305"><span class="nav-number">13.1.8.</span> <span class="nav-text">8.移动设备上的ChaCha20-Poly1305</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gaomy</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
